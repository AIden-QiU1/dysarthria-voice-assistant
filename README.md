# ğŸ”¥ ç‡ƒè¨€ VoxFlame Agent

<p align="center">
  <img src="docs/assets/voxflame-logo.svg" alt="VoxFlame Logo" width="200">
</p>

<h3 align="center">ğŸ¤ ç‚¹ç‡ƒä½ çš„å£°éŸ³ Â· Ignite Your Voice</h3>

<p align="center">
  <strong>ä¸º2000ä¸‡æ„éŸ³éšœç¢æ‚£è€…æ‰“é€ çš„AIå®æ—¶ä¼šè¯æ”¯æŒäºº</strong><br>
  <em>è®©æ¯ä¸€ä¸ªå£°éŸ³éƒ½è¢«å¬è§ã€è¢«ç†è§£ã€è¢«å®ç°</em>
</p>

<p align="center">
  <a href="#æ„¿æ™¯">æ„¿æ™¯</a> â€¢
  <a href="#æ ¸å¿ƒåŠŸèƒ½">æ ¸å¿ƒåŠŸèƒ½</a> â€¢
  <a href="#å¿«é€Ÿå¼€å§‹">å¿«é€Ÿå¼€å§‹</a> â€¢
  <a href="#æ¶æ„è®¾è®¡">æ¶æ„è®¾è®¡</a> â€¢
  <a href="#æŠ€æœ¯æ ˆ">æŠ€æœ¯æ ˆ</a> â€¢
  <a href="#å¼€å‘è®¡åˆ’">å¼€å‘è®¡åˆ’</a>
</p>

---

## ğŸ”¥ï¸ å“ç‰Œé‡Šä¹‰

| ä¸­æ–‡ | è‹±æ–‡ | å«ä¹‰ |
|------|------|------|
| **ç‡ƒè¨€** | **VoxFlame** | Vox(æ‹‰ä¸è¯­:å£°éŸ³) + Flame(ç«ç„°) = ç‚¹ç‡ƒå£°éŸ³ |

> **å“ç‰Œæ•…äº‹**  
> æ¯ä¸€ä¸ªæ„éŸ³éšœç¢æ‚£è€…å¿ƒä¸­ï¼Œéƒ½æœ‰æƒ³è¯´å´è¯´ä¸å‡ºçš„è¯ã€‚  
> ç‡ƒè¨€ï¼Œç‚¹ç‡ƒä½ çš„å£°éŸ³ï¼Œè®©ä¸–ç•Œå¬è§ä½ ã€‚

**ä¸­æ–‡å£å·**: ç‚¹ç‡ƒä½ çš„å£°éŸ³  
**è‹±æ–‡å£å·**: Ignite Your Voice

---

## ğŸŒŸ æ„¿æ™¯

**å¸‚åœºè§„æ¨¡**: ä¸­å›½æœ‰ **2000ä¸‡** æ„éŸ³éšœç¢æ‚£è€…ï¼ˆåŒ…æ‹¬1200-1500ä¸‡æ„éŸ³éšœç¢+è€å¹´äººç¾¤ä½“ï¼‰

**æ ¸å¿ƒé—®é¢˜**:
- 62% æ‚£è€…æœ‰æŠ‘éƒå€¾å‘ï¼Œ68% å› æ²Ÿé€šå›°éš¾å‡å°‘å¤–å‡º
- æ™®é€šASRå¯¹æ„éŸ³éšœç¢è¯­éŸ³è¯†åˆ«å‡†ç¡®ç‡ < 30%ï¼ˆWER > 70%ï¼‰
- ç´§æ€¥åœºæ™¯ï¼ˆå‘¼æ•‘/åŒ»ç–—ï¼‰æ— æ³•è¡¨è¾¾ï¼Œå±åŠç”Ÿå‘½å®‰å…¨
- æ—¥å¸¸æ²Ÿé€šéœ€è¦å®¶äºº"ç¿»è¯‘"ï¼Œæ¯å¤©é¢å¤–2-3å°æ—¶è´Ÿæ‹…

**VoxFlameçš„ä½¿å‘½**:

> ä¸æ˜¯"çº æ­£"ç”¨æˆ·çš„å‘éŸ³ï¼Œè€Œæ˜¯**ç†è§£**ç”¨æˆ·çš„æ„å›¾ã€‚  
> **å¸®åŠ©æ®‹ç–¾äººè¿ˆå‡ºä¸»åŠ¨æ²Ÿé€šçš„ç¬¬ä¸€æ­¥** - åœ¨å®é™…æ²Ÿé€šåœºæ™¯ä¸­çš„AIä¼šè¯æ”¯æŒäºº/ä¸»æŒäººã€‚

---

## âœ¨ æ ¸å¿ƒåŠŸèƒ½ï¼ˆMVP V0.1ï¼‰

### ğŸ¯ å®æ—¶ä¼šè¯æ”¯æŒäºº

#### ğŸ¤ **é«˜ç²¾åº¦æ„éŸ³éšœç¢ASR**
- **è‡ªå®šä¹‰FunASRæ¨¡å‹**: åŸºäºSenseVoice-smallï¼Œé’ˆå¯¹æ„éŸ³éšœç¢è®­ç»ƒ
- **Hotwordsæ”¯æŒ**: åŠ¨æ€å­¦ä¹ ç”¨æˆ·å¸¸ç”¨è¡¨è¾¾ï¼ˆ"ç‡ƒè¨€"ã€"å¸®æˆ‘"ã€"å–æ°´"ï¼‰
- **VADé›†æˆ**: Silero VADç²¾å‡†æ£€æµ‹è¯­éŸ³æ´»åŠ¨

#### ğŸ§  **ä¸ªæ€§åŒ–LLMç†è§£**
- **GLM-4 Flash**: ç†è§£ç”¨æˆ·æ„å›¾ï¼Œç®€çŸ­æ¸…æ™°å›å¤
- **Memoryç®¡ç†**: PowerMem + OceanBaseï¼Œè®°ä½ç”¨æˆ·ä¹ æƒ¯
- **Turn Detection**: AIç†è§£è¯è½®å®Œæˆï¼ˆéç®€å•VADï¼‰ï¼Œé€‚é…æ‚£è€…è¯´è¯èŠ‚å¥

#### ğŸ”Š **è‡ªç„¶TTSè¾“å‡º**
- **CosyVoice**: é«˜è´¨é‡ä¸­æ–‡TTSï¼Œå¯è°ƒè¯­é€Ÿ
- **åæœŸå¯å¾®è°ƒ**: é’ˆå¯¹ç”¨æˆ·å­¦ä¹ æ ‡å‡†å‘éŸ³

#### ğŸ“Š **æ•°æ®è´¡çŒ®æ¨¡å—**
- **ç”¨æˆ·æ•°æ®æ”¶é›†**: æ„éŸ³éšœç¢è¯­éŸ³æ ·æœ¬ï¼ˆåŒ¿ååŒ–ï¼‰
- **Supabaseå­˜å‚¨**: ç”¨äºæ¨¡å‹æŒç»­è®­ç»ƒ

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Frontend (Next.js 14 PWA)                â”‚
â”‚  â€¢ WebSocket Client â€¢ Agora RTC (future) â€¢ PWA Offline     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ WebSocket (base64 PCM 16kHz)
                     â”‚ HTTP REST API
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Backend (Express + TypeScript)                â”‚
â”‚  â€¢ TEN Agent HTTP Client (start/stop session)              â”‚
â”‚  â€¢ Memory Management API (Supabase)                         â”‚
â”‚  â€¢ Hotwords Extraction & Update                             â”‚
â”‚  â€¢ Session Logging                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                        â”‚
             â”‚                        â”‚ Supabase Client
             â”‚                        â–¼
             â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚              â”‚  Supabase PostgreSQL â”‚
             â”‚              â”‚  â€¢ User Profiles     â”‚
             â”‚              â”‚  â€¢ Session Logs      â”‚
             â”‚              â”‚  â€¢ Memory Sync       â”‚
             â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚ HTTP API (start/stop)
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              TEN Agent Framework (Python)                    â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  websocket_server (port 8765)                        â”‚  â”‚
â”‚  â”‚    â†“ PCM audio                                       â”‚  â”‚
â”‚  â”‚  Silero VAD                                          â”‚  â”‚
â”‚  â”‚    â†“ voice segments                                  â”‚  â”‚
â”‚  â”‚  FunASR (custom model + hotwords)                    â”‚  â”‚
â”‚  â”‚    â†“ text_data                                       â”‚  â”‚
â”‚  â”‚  main_python (PowerMem + Turn Detection)             â”‚  â”‚
â”‚  â”‚    â†“ user query + memory context                     â”‚  â”‚
â”‚  â”‚  GLM-4 LLM (with Tools)                              â”‚  â”‚
â”‚  â”‚    â†“ assistant response                              â”‚  â”‚
â”‚  â”‚  CosyVoice TTS                                       â”‚  â”‚
â”‚  â”‚    â†“ PCM audio â†’ websocket_server                    â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  text_webhook â†’ Backend API                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  PowerMem Memory Management                          â”‚  â”‚
â”‚  â”‚    â†“ stores to                                       â”‚  â”‚
â”‚  â”‚  OceanBase SeekDB (Docker)                           â”‚  â”‚
â”‚  â”‚    â†‘ Backend reads for analytics                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®æµç¨‹

**ä¼šè¯å¼€å§‹**:
```
Frontend â†’ Backend POST /api/session/start
Backend â†’ TEN Agent HTTP API (generate WebSocket port)
TEN Agent â†’ PowerMem load user memories
TEN Agent â†’ Return {ws_port: 8765}
Frontend â†’ Connect WebSocket ws://localhost:8765
```

**å®æ—¶å¯¹è¯**:
```
User speaks â†’ Frontend captures audio â†’ WebSocket â†’ TEN Agent
TEN Agent: PCM â†’ VAD â†’ FunASR (+ hotwords) â†’ ASR text
main_python: Search PowerMem for relevant memories
main_python: Inject memory context into prompt
GLM-4: Generate response (with Tool Calling)
CosyVoice: Text â†’ PCM audio
TEN Agent â†’ WebSocket â†’ Frontend â†’ Play audio
text_webhook: Send ASR+LLM results â†’ Backend API
Backend: Store to Supabase + analyze hotwords
```

**ä¼šè¯ç»“æŸ**:
```
Frontend â†’ Backend POST /api/session/stop
Backend â†’ TEN Agent HTTP API (stop session)
TEN Agent â†’ PowerMem save new memories â†’ OceanBase
Backend â†’ Sync memories from OceanBase to Supabase
Backend â†’ Extract hotwords from session logs
Backend â†’ Update TEN Agent hotwords config (for next session)
```

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

| å±‚çº§ | æŠ€æœ¯é€‰å‹ | è¯´æ˜ |
|------|---------|------|
| **Frontend** | Next.js 14 | PWAï¼Œæ”¯æŒç¦»çº¿ |
| | TypeScript | ç±»å‹å®‰å…¨ |
| | Tailwind CSS | æ ·å¼æ¡†æ¶ |
| | WebSocket Client | å®æ—¶éŸ³é¢‘ä¼ è¾“ |
| | MediaRecorder API | æµè§ˆå™¨å½•éŸ³ |
| **Backend** | Express | Node.jsæœåŠ¡å™¨ |
| | TypeScript | ç±»å‹å®‰å…¨ |
| | Supabase Client | PostgreSQLæ•°æ®åº“ |
| | Mem0 (optional) | Memoryç®¡ç†æ¡†æ¶ |
| **TEN Agent** | TEN Framework | å®æ—¶AI Agentæ¡†æ¶ |
| | Python 3.10+ | Extensionå¼€å‘è¯­è¨€ |
| | **FunASR** | è‡ªå®šä¹‰ASRï¼ˆSenseVoice-small + hotwordsï¼‰ |
| | **GLM-4 Flash** | æ™ºè°±AIå¤§æ¨¡å‹ |
| | **CosyVoice** | é˜¿é‡Œé€šä¹‰å®éªŒå®¤TTS |
| | **PowerMem** | OceanBaseé•¿çŸ­æœŸè®°å¿†ç®¡ç† |
| | Silero VAD | è¯­éŸ³æ´»åŠ¨æ£€æµ‹ |
| | websocket_server | WebSocket transport |
| | text_webhook | æ•°æ®å›ä¼ Backend |
| **Memory** | OceanBase SeekDB | TEN Agentæœ¬åœ°è®°å¿†å­˜å‚¨ |
| | Supabase PostgreSQL | Backendä¸­å¿ƒåŒ–æ•°æ®ç®¡ç† |
| **Infrastructure** | Docker Compose | å®¹å™¨ç¼–æ’ |
| | Redis | Sessionç¼“å­˜ |
| | Nginx (future) | è´Ÿè½½å‡è¡¡ |

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
```bash
Node.js 18+
Python 3.10+
Docker & Docker Compose
CUDA 11.8+ (for FunASR GPU acceleration)
```

### å®‰è£…æ­¥éª¤

#### 1. å…‹éš†ä»“åº“
```bash
git clone https://github.com/yourusername/VoxFlame-Agent.git
cd VoxFlame-Agent
```

#### 2. é…ç½®ç¯å¢ƒå˜é‡
```bash
# Backend (.env)
cp backend/.env.example backend/.env

# TEN Agent (.env)
cp ten_agent/.env.example ten_agent/.env

# Frontend (.env.local)
cp frontend/.env.example frontend/.env.local
```

**Backend .env**:
```env
PORT=3001
SUPABASE_URL=your_supabase_project_url
SUPABASE_ANON_KEY=your_supabase_anon_key
TEN_AGENT_API_URL=http://localhost:8080
```

**TEN Agent .env**:
```env
GLM_API_KEY=your_glm_api_key
COSY_TTS_API_KEY=your_dashscope_api_key
BACKEND_WEBHOOK_URL=http://localhost:3001/api/webhook/ten-agent
OCEANBAS_HOST=localhost
OCEANBASE_PORT=2881
OCEANBASE_USER=root
OCEANBASE_PASSWORD=root
OCEANBASE_DATABASE=voxflame
```

**Frontend .env.local**:
```env
NEXT_PUBLIC_API_URL=http://localhost:3001
```

#### 3. å¯åŠ¨æœåŠ¡

**æ–¹å¼A: Docker Composeï¼ˆæ¨èï¼‰**
```bash
docker-compose up -d
```

**æ–¹å¼B: æ‰‹åŠ¨å¯åŠ¨**
```bash
# 1. å¯åŠ¨OceanBase
docker run -d --name oceanbase-seekdb \
  -p 2881:2881 -p 2886:2886 \
  -e ROOT_PASSWORD=root \
  -e SEEKDB_DATABASE=voxflame \
  oceanbase/seekdb:latest

# 2. å¯åŠ¨Backend
cd backend
npm install
npm run dev  # Port 3001

# 3. å¯åŠ¨TEN Agent
cd ten_agent
pip install -r requirements.txt
python main.py  # Port 8080

# 4. å¯åŠ¨Frontend
cd frontend
npm install
npm run dev  # Port 3000
```

#### 4. è®¿é—®åº”ç”¨
- Frontend: http://localhost:3000
- Backend API: http://localhost:3001/api
- TEN Agent API: http://localhost:8080

---

## ğŸ“‹ å¼€å‘è®¡åˆ’

### MVP V0.1ï¼ˆå½“å‰é˜¶æ®µï¼‰
- [x] âœ… TEN Agent property.jsoné…ç½®ï¼ˆWebSocketæ¶æ„ï¼‰
- [x] âœ… è‡ªå®šä¹‰FunASR extension (hotwordsæ”¯æŒ)
- [x] âœ… GLM-4 LLM extension
- [x] âœ… CosyVoice TTS extension
- [x] âœ… Supabaseæ•°æ®åº“schema
- [x] âœ… Backend Supabaseå®¢æˆ·ç«¯
- [x] âœ… Backend Memoryç®¡ç†API (7ä¸ªç«¯ç‚¹)
- [ ] ğŸ”„ PowerMem + OceanBaseé›†æˆ


- [ ] ğŸ”„ Frontend WebSocket client
- [ ] ğŸ”„ Docker Composeéƒ¨ç½²
- [ ] ğŸ”„ ç«¯åˆ°ç«¯æµ‹è¯•

### MVP V0.2ï¼ˆè§„åˆ’ä¸­ï¼‰
- [ ] Turn Detectioné›†æˆï¼ˆCerebrium or GLM-4åˆ¤æ–­ï¼‰
- [ ] HotwordsåŠ¨æ€æ›´æ–°ï¼ˆBackendåˆ†æâ†’TEN Agent reloadï¼‰
- [ ] Frontendè®°å¿†å±•ç¤ºé¡µé¢
- [ ] ASRæ¨¡å‹é’ˆå¯¹æ„éŸ³éšœç¢fine-tuning
- [ ] å¤šTEN Agentå®ä¾‹éƒ¨ç½²ï¼ˆNginxè´Ÿè½½å‡è¡¡ï¼‰

### æœªæ¥åŠŸèƒ½
- [ ] Agora RTCè§†é¢‘é€šè¯ï¼ˆçœ‹å˜´å‹è¾…åŠ©ï¼‰
- [ ] ç”µè¯å®æ—¶åŠ©æ‰‹ï¼ˆTwilioé›†æˆï¼‰
- [ ] AACå›¾ç‰‡äº¤æµå¢å¼º
- [ ] å¤šè¯­è¨€æ”¯æŒï¼ˆè‹±æ–‡ã€ç²¤è¯­ï¼‰

---

## ğŸ“š æŠ€æœ¯æ–‡æ¡£

- [APIæ–‡æ¡£](docs/API_SPECIFICATION.md)
- [ç”¨æˆ·ç ”ç©¶](docs/USER_RESEARCH_DYSARTHRIC_ELDERLY_CN.md)
- [TEN Frameworké›†æˆ](docs/TEN_FRAMEWORK_INTEGRATION.md)

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ï¼è¯·é˜…è¯»[è´¡çŒ®æŒ‡å—](CONTRIBUTING.md)äº†è§£è¯¦æƒ…ã€‚

---

## ğŸ“„ è®¸å¯è¯

[MIT License](LICENSE)

---

<p align="center">
  <strong>ğŸ”¥ ç‡ƒè¨€ Â· ç‚¹ç‡ƒæ¯ä¸€ä¸ªå£°éŸ³ ğŸ”¥</strong>
</p>
